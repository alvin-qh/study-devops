{
  "settings": {
    "number_of_replicas": "0",
    "number_of_shards": "1",
    "similarity": {
      "default": {
        "type": "BM25"
      },
      "arrays": {
        "type": "BM25",
        "b": "0.3",
        "k1": "1.2"
      }
    },
    "analysis": {
      "filter": {
        "lowercase": {
          "type": "lowercase"
        },
        "icu_normalizer": {
          "name": "nfkc_cf",
          "type": "icu_normalizer"
        },
        "smartcn_stop": {
          "type": "stop",
          "stopwords": [
            "，",
            ",",
            ".",
            "。"
          ]
        }
      },
      "char_filter": {
        "tsconvert": {
          "convert_type": "t2s",
          "type": "stconvert",
          "keep_both": "false",
          "delimiter": "#"
        },
        "word_break_helper_source_text": {
          "type": "mapping",
          "mappings": [
            "_=>\\u0020",
            ".=>\\u0020",
            "(=>\\u0020",
            ")=>\\u0020",
            ":=>\\u0020"
          ]
        }
      },
      "analyzer": {
        "plain_search_analyzer": {
          "filter": [
            "lowercase",
            "smartcn_stop",
            "icu_normalizer"
          ],
          "char_filter": [
            "word_break_helper_source_text"
          ],
          "type": "custom",
          "tokenizer": "icu_tokenizer"
        }
      }
    }
  },
  "mappings": {
    "books": {
      "dynamic": false,
      "properties": {
        "name": {
          "properties": {
            "zh": {
              "type": "keyword",
              "copy_to": "all"
            },
            "en": {
              "type": "keyword",
              "copy_to": "all"
            }
          }
        },
        "intro": {
          "type": "text",
          "index_options": "offsets",
          "similarity": "BM25",
          "analyzer": "plain_search_analyzer",
          "position_increment_gap": 10,
          "fields": {
            "word_count": {
              "type": "token_count",
              "store": true,
              "analyzer": "plain_search_analyzer"
            }
          },
          "copy_to": "all"
        },
        "author": {
          "type": "keyword",
          "copy_to": "all"
        },
        "category": {
          "type": "keyword",
          "copy_to": "all"
        },
        "publication_date": {
          "type": "date",
          "copy_to": "all"
        },
        "press": {
          "properties": {
            "zh": {
              "type": "keyword",
              "copy_to": "all"
            },
            "en": {
              "type": "keyword",
              "copy_to": "all"
            }
          }
        },
        "all": {
          "type": "text",
          "index_options": "offsets",
          "similarity": "BM25",
          "analyzer": "plain_search_analyzer",
          "search_analyzer": "plain_search_analyzer",
          "position_increment_gap": 10,
          "fields": {
            "word_count": {
              "type": "token_count",
              "store": true,
              "analyzer": "plain_search_analyzer"
            }
          }
        }
      }
    }
  }
}
