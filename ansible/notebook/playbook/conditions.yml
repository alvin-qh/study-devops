---

# Demo of condition statements
- name: "Basic conditionals with when"
  hosts: 
    - "group_debian1"
    - "group_centos1"
  user: "alvin"
  connection: "ssh"
  tags: "T1"
  tasks:
    - name: "Run uname on 'Debian'"
      shell: "uname -sa"
      register: "debian_uname"
      when: "ansible_distribution == 'Debian'"
      
    - name: "Run uname on 'CentOS'"
      shell: "uname -sa"
      register: "centos_uname"
      when: "ansible_distribution == 'CentOS'"
      
    - name: "Show result"
      debug:
        msg: 
          - "{{ debian_uname.stdout | default('None') }}"
          - "{{ centos_uname.stdout | default('None') }}"
          
- name: "Conditionals based on ansible_facts"
  hosts: 
    - "group_debian1"
    - "group_centos1"
  user: "alvin"
  connection: "ssh"
  tags: "T2"
  tasks:
    - name: "Run uname on 'Debian' version 10"
      shell: "uname -sa"
      register: "debian10_uname"
      when: "ansible_facts['distribution'] == 'Debian' and (ansible_facts['distribution_major_version'] | int) >= 10"
      
    - name: "Run uname on 'Debian' version 9"
      shell: "uname -sa"
      register: "debian9_uname"
      when: "ansible_facts['distribution'] == 'Debian' and (ansible_facts['distribution_major_version'] | int) < 10"
      
    - name: "Run uname on 'CentOS' version 8"
      shell: "uname -sa"
      register: "centos8_uname"
      when: "ansible_facts['distribution'] == 'CentOS' and (ansible_facts['distribution_major_version'] | int) >= 8"
      
    - name: "Run uname on 'CentOS' version 7"
      shell: "uname -sa"
      register: "centos7_uname"
      when: "ansible_facts['distribution'] == 'CentOS' and (ansible_facts['distribution_major_version'] | int) < 8"
      
    - name: "Show result"
      debug:
        msg: 
          - "{{ debian10_uname.stdout | default('None') }}"
          - "{{ centos8_uname.stdout | default('None') }}"
          - "{{ debian9_uname.stdout | default('None') }}"
          - "{{ centos7_uname.stdout | default('None') }}"