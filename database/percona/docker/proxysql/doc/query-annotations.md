# 查询注解

ProxySQL 支持在查询中增加注解的方式修改默认的查询行为, 通过这种方式, 可以让查询适应一些特殊的场景

查询注解是通过在查询语句中插入注释的方式进行的, 例如:

```sql
SELECT /* ;cache_ttl=0;query_timeout=100 */ `text`
FROM `varchar_test`;
```

## 目前支持的查询注解

- `cache_ttl`, 特殊指定本次查询结果缓存的时间, 单位为 `ms`;
- `query_delay`, 特殊指定本次查询语句在处理前的延迟时间, 单位为 `ms`;
- `query_retries`, 特殊指定本次查询语句在后端数据库处理失败后的重试次数;
- `query_timeout`, 特殊指定本次查询语句在后端数据库执行的超时时间;
- `hostgroup`, 特殊指定本次查询要路由到的后端数据库组;
- `mirror`: 为本次查询启用镜像查询, 并为镜像查询设置 `mirror_hostgroup` (镜像查询路由目标数据库组);
- `max_lag_ms`, 设置从属数据库的最大"复制滞后"的时间 (单位 `ms`), 从而选择一个满足条件的后端数据库实例;
- `min_epoch_ms`, 和 `max_lag_ms` 含义类似, 但指的是一个绝对时间 (即一个到毫秒的时间戳), 而非相对时间;
- `min_gtid:`, 指定一个具体的 GTID 值, 目标数据库实例至少要达到这个 ID;
- `create_new_connection`, 为本次查询强行创建一个新的后端数据库连接而非从连接池获取连接
