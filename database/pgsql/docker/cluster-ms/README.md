# 主从模式

- [主从模式](#主从模式)
  - [1. 原理](#1-原理)
    - [1.1. 同步日志](#11-同步日志)
    - [1.2. 上述](#12-上述)
  - [2. 操作步骤](#2-操作步骤)
    - [1.](#1)
    - [2.](#2)

## 1. 原理

和其它数据库类似, PostgreSQL 的主从同步也是通过日志复制的方式, 即从库从主库复制到操作日志, 并在从库上进行重放, 达到主从同步的目的

由于本身附带工具的完备, 所以 PostgreSQL 的主从复制操作比其它数据库要更为简单, 基本分为如下几步:

1. 配置主库 (打开 WAL 日志, 设置主库的访问权限);
2. 在从库运行一次主库的全量备份, 将主库的全部数据同步到从库, 并设置从库加入主库同步节点;
3. 重启从库;

### 1.1. 同步日志


create user replica with replication login password 'replication';


pg_basebackup -h 192.168.0.21 -p 54321 -U replica -R -P -v -C --slot=pgstandby1 -D /Users/liurui/pg2

### 1.2. 上述


## 2. 操作步骤

### 1.

### 2.
